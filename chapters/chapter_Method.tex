\chapter{Methodology}
\label{ch:method}
This chapter describes how the chatbot “\prototype{}” (pronounced “mah-soo-taa” - a phonetic adaptation of the English term "master" into Japanese katakana) was developed. It provides further insight into the applied research method and the process through which the prototype was created. This gives the reader the understanding of how the research and implementation was conducted before discussing the implementation details in chapter \ref{ch:implementation}.

%%%%
% Action Research in theory
%%%%
\section{Action Research Design}
\label{sec:action_research_design}
Action Research (AR)  is a research method which is highly applicable when developing an information system such as the one presented in this paper. The advantage of AR is that a large focus can be laid on the development of a system while still achieving an academic benefit. This allows for a very explorative approach to developing an information system.

% Why action research applies well to software development (case studies)


% What cyclical phases are
Cyclical phases are central to the concept of Action Research. Baskerville \cite{baskerville1999investigating} describes Action Research as an iterative process consisting of five steps within a single cycle. Other sources, such as Cornish et al. \cite{cornish2023participatory}, propose variations with fewer (usually three) phases within a cycle; however these models also boil down to the same concepts. Across the literature, Action Research cycles follow the same structure: planning what should be done in the new cycle, taking action, and evaluating the outcome of the completed cycle before moving on to the next one \cite{baskerville1999investigating, cornish2023participatory}.

% Steps in the cycle
The paper at hand applied a cycle using the following five steps according to Baskerville \cite{baskerville1999investigating}: diagnosing, action planning, action taking, evaluating, and specifying learning. The reason for choosing five cycles instead of three is the benefit of describing the development process in more detail. This five-step-cycle including the preliminary and subsequent steps are summarized in figure \textbf{to do create a drawing of the cycles}.

% Cycle duration
Each cycle lasted between three and four weeks. The sources used do not mention how long a single cycle should last. However, a cycle of two to three weeks were deemed as reasonable for the development of \prototype{} because status updates were held at the end of each cycle and with the given amount of time for the cycle, there was enough progress to discuss in these meetings.
% Participatory Action Research
Participatory Action Research (PAR) goes a step further in creating a more collaborative environment between the researcher and client participants. Instead of leaving the theorizing up to the researcher, new information and ideas are thought up together with the client participants, giving both parties an active role. This is beneficial because the client participants often have both theoretical and practical knowledge of the subject matter being worked on. \cite{baskerville1999investigating}

The following subsections explain the research design of the applied action research. For the exhaustive action research protocol, refer to chapter \ref{appendix:action_research_protocol} of the appendix.

%%%%
% Action Research Setup
%%%%
\section{Action Research Setup}
\label{sec:action_research_setup}

% Domain
The domain of EAM was focused on within this research. In particular, the study addressed application landscapes, business capability maps, as well as the relationships between these two architectural artifacts. These artifacts are commonly used to support documenting an enterprise's landscapes are used to align an enterprise's IT with its strategic business objectives.

Due to their structural complexity with heterogenous data sources and multiple stakeholders involved, these artifacts are often large and difficult to interpret. Maintaining an overview can be especially challenging for junior level enterprise architects. This challenge motivates the exploration of AI-supported solutions that enable conversational interaction with the architecture, rather than manually navigating the complex diagrams.

% Stakeholders
The research was conducted in close collaboration with the academic supervisor and a co-advisor. The academic supervisor gave academic guidance and supported the structuring of the research process to ensure academic relevance. The co-advisor acted as the domain expert and the critical partner, contributing practical insights to ground the research in real-world relevance. The author of this thesis assumed the role of the researcher, implementing the action research cycles, validating findings, and planning subsequent steps in coordination with the other stakeholders.

% Initial Problem Statement
At the outset of the research, the general problem space was clear, but the potential solution was only vaguely defined. The co-advisor initialized the research with a vague vision of a centralized system containing all enterprise architecture information, which can be interacted with via natural language. The motivation for this was to reduce the effort required to interpret the enterprise architecture artifacts.

However, in the early stages of the project, not only were the technical details of the potential solution unclear, but also the feasibility of such a system. Early on it was mutually agreed upon that LLMs and AI would play a key role in realizing this, even though the data structures, mechanisms, storage options, and interaction patterns were still open. Consequently, the initial problem statement was intentionally formulated at a high level to provide a suitable starting point for iterative exploration. Through the iterative development cycles, this high level problem statement was refined into a concrete problem definition and technical solution.


% Constraints and Data

%%%%
% Action Research Cycles
%%%%
\section{Action Research Cylces}
\label{sec:action_research_cycles}
The above mentioned vague details of the implementation became clear during the development cycles, leading to a final architecture with a clear structure. Each cycle began with a meeting between all three stakeholders. The end of one cycle was the beginning of the next one and was concluded in the same meeting. Table \ref{tab:action-research-cycles} summarizes these cycles.

% Development Cycles
% Cycle 1
\subsection{Cycle 1}
\label{sub:cycle1}
\textbf{Diagnosis}:  The initial problem statement lacked concrete technical formulation and the feasibility of natural language interaction with enterprise architecture data was unclear.

The co-advisor outlined typical enterprise architecture workflows and the tools used to document and interact with architectural artifacts in practice. An initial idea was propsed of an AI-based black-box system capable of ingesting architecture data and deriving its own internal representations. The feasibility as well as academic applicability of such a black-box system were critically questioned, particularly because of the limited transparency of the innern mechanisms and how to test this. As an alternative, the academic supervisor proposed an explicit knowledge-graph approach in which a knowledge-graph is built which can be used to supplement generated answers.

The key distinction between the black-box and white-box approaches is the transparency. While the black-box approach autonomously creates an internal representation of the information, the white-box approach requires the manual design and implementation of an explicit technical architecture.

These discussions were necessary in order to scope the solution space. Early solution ideas included a chat that would support enterprise architects in exploring and improving application landscapes, for example by identifying inconsistencies or incomplete application landscapes.

\textbf{Action Planning}: The first cycle aimed to develop a proof of concept that enables conversational access to a knowledge-graph consisting of enterprise architecture knowledge grounded in textbook-based domain information. It was decided that a single-agent architecture will be used, as multi-agent architectures were considered unnecessarily complex for an initial proof of concept.

At this stage, the research methodology had not yet been explicitly defined as action research, and it was initially assumed that the resulting prototype would be evaluated through an expert-interview.

\textbf{Action Taken}: An initial knowledge-graph was constructed based on content from the textbook \textit{Masterclass Enterprise Architecture Management} \cite{jung2021masterclass}. The textual content was iteratively preprocessed and transformed into graph representations, with successive refinements  applied to improve the mapping of domain concepts into nodes and relationships. After integrating the full textbook into the knowledge-graph, additional prototypical data was incorporated to enable querying the knowledge-graph of concrete architectural data.

\textbf{Evaluation}: The state of the proof of concept after the first cycle was demonstrated to both advisors and evaluated qualitatively through open discussions. Both advisors positively assessed the feasibility of the approach, and the co-advisor confirmed that an explicit knowledge-graph-based solution will be a viable direction for further development.

\textbf{Learning}: Compared to the beginning of the cycle, in which the feasibility of a centralized knowledge-graph was uncertain, the first cycle demonstrated that an explicit, white-box approach represents a practical path forward. The cycle also revealed key challenges related to the transformation of heterogeneous data into graph structures and the effective querying of such representations. Finally, it became evident that further iterations would be required to systematically address these challenges with an exploratory development process.

% Cycle 2
\subsection{Cycle 2}
\label{sub:cycle2}
\textbf{Diagnosis}: a next idea would be to feed in more textbooks. idea would be to compare my results to an existing copilot such as the Microsoft Copilot Studio. An idea came up that it might make sense to have 1 database for the textbook information and 1 database for the enterprise architecture data. we agreed to use one database in hopes of achieving better results as nodes between the textbook and the enterprise data may be connected together in the single database, achieving better results. This is also the phase, where we started discussing potential data sets. the problem here being that the co-advisor is not allowed to simply export his company data and give it to me. we also started discussing how to evaluate my system. we discussed potential experiments and evaluation methods - including testing the knowledge graph directly. we agreed that i would use the data from the assignment of our uni's course "Enterprise Architecture Management" which i completed in the previous semester. this dataset contains an application landscape and a business capability map for a fictitious company named "SpeedParcel". 

\textbf{Action Planning}:

\textbf{Action Taken}:

\textbf{Evaluation}:

\textbf{Learning}:

% Cycle 3
\subsection{Cycle 3}
\label{sub:cycle3}
\textbf{Diagnosis}:

\textbf{Action Planning}:

\textbf{Action Taken}:

\textbf{Evaluation}:

\textbf{Learning}:

% Cycle 4
\subsection{Cycle 4}
\label{sub:cycle4}
\textbf{Diagnosis}:

\textbf{Action Planning}:

\textbf{Action Taken}:

\textbf{Evaluation}:

\textbf{Learning}:


The main challenge of this cycle was refactoring the cyphers that get called agains the database. the reason being that the previous method for generating text-to-cypher was easy because it was only calling the speedparcel database and the schema of this was entirely known. however, during this sprint we got new data exported from architecture diagrams in archi. this data is well structured but the schema is unknown. this means that the text-to-cypher has to be able to query the graph database agnostic of any schema in it. meaning, the text-to-cypher has to be completely refactored in order to be able to reliable query the dataset with unknown contents.

The source from Wan i \ref{sub:agnostic_cypher}  \cite{wan2025prompting} explains how he created a 3-step-preprocessing in order to query the database agnostically. what i did is not 1-to-1 the same thing, but i borrowed the ideas. the main change being changing the CALL db.schema.visualization() from before to the APOC call apoc.meta.schema() which apparently returns more sensible information. that combined with the SHOW INDEXES call give a better result (i assume - i'm writing this before testing just to get my ideas out of my head lol have fun rewriting this. i wrote this in Bremen on 28.12 xoxo)


% Table summarizing the action research cycles
\begin{table}[htbp]
\centering
\caption{Overview of Action Research Cycles}
\label{tab:action-research-cycles}

\resizebox{\textwidth}{!}{%
\begin{tabular}{p{2.0cm} p{3.2cm} p{3.2cm} p{3.2cm} p{3.2cm} p{3.2cm}}
\toprule
\textbf{Cycle} &
\textbf{Diagnosis} &
\textbf{Action Planning} &
\textbf{Action Taken} &
\textbf{Evaluation} &
\textbf{Learning / Outcome} \\
\midrule
Cycle 1 & Todo & Todo & Todo & Todo & Todo  \\
Cycle 2 & Todo & Todo & Todo & Todo & Todo  \\
Cycle 3 & Todo & Todo & Todo & Todo & Todo  \\
Cycle 4 & Todo & Todo & Todo & Todo & Todo  \\
\bottomrule
\end{tabular}
}

\end{table}



%%%%
% Final Meeting
%%%%
\section{Final Meeting}
\label{sec:action_research_final_meeting}
Todo: den Termin vor Ort beschreiben
Purpose of the meeting, who participated, what was validated, what kind of feedback was collected.




% Conclusion Paragraph
As described in this chapter, it becomes clear why action research was an invaluable methodology. From unclear beginnings containing only a vague vision for a final prototype, each development cycle contributed to the final architecture being clear and goal oriented. Each phase helped to examine what was possible from a technical standpoint as well as how to move forward. This supported the explorative nature of the project.



